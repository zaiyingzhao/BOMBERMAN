# BOMBERMAN
ソフトウェアⅠ最終課題(11/26)

# [week7_1](https://eeic-software1.github.io/2021/week7/#week7_1)


以下、課題8についてです。課題8に到達しなかった場合は、編集しなくて大丈夫です。

## 課題8について
もし優秀賞に選ばれた場合、ユーザ名とコードをソフ１メンバーに公開してもいいですか？（はい）


複数人で課題を行った場合、一緒に行ったユーザの名前を書いてください。また、メインリポジトリのユーザ名を書いてください。
- 一緒に行ったユーザ名（複数可）：kenjikoba zaiyingzhao
- メインリポジトリのユーザ名：omikuzi-9


## 課題8のコンパイルと実行

実行するために必要なコマンド（必要に応じて編集してください）

コンパイル：
```bash
gcc main2.c -o main2
```

実行：
```
./main2
```

## 課題8の解説

2人でプレイできる2人対戦型ボンバーゲームを作りました。

基本的にルールは課題７までのと同様で、それを2人でできるように拡張した形です。

また、爆弾の数や炎の長さを自由にカスタマイズして遊べるようになっています。

### プレイの仕方

①爆発の炎が伸びるマス数を入力する(1~9までの数字)。これで上下左右の何マスまで燃えるかが決まる。

②各プレイヤーが何個爆弾を持っているかを入力する(1~9までの数字)。例えば3と入力すると、一人あたり同時に3個まで爆弾を置けるようになる。

③爆発までの制限時間を設定する(01~99までの数字)。爆弾を置いた後、入力した数字と同じ回数行動すると爆弾が爆発する。Turn Battleならば10くらいが標準的。

※1桁の数字を指定する場合、10の位は0埋めで入力してください。（ 1 → 01 など）

④ゲームモードを選択する。

- Turn Battle：交互に2人の行動順が移動。じっくり将棋のように楽しみたい方向け。
- Free Turn Battle：行動順が存在せず、自由に動くことができる。

⑤対戦が開始される。

ここで、対戦する際は、キーボードの左右（プレイヤー1が左側、プレイヤー2が右側）に分かれることによって2人対戦を行えるようにした。

### 具体的な操作内容

○プレイヤー1

・(w,s,a,d)で上下左右移動する

・'e'で爆弾を配置

○プレイヤー2

・(i,k,j,l)で上下左右移動する

・'o'で爆弾を配置

爆弾はプレイヤー1、プレイヤー2が合わせて規定回数動いたら爆発する。

爆炎の範囲内に別の爆弾があると、連鎖して爆発を引き起こす。また、壁'$'は爆発によって壊すことができる。

ゲーム終了時の'Player1(2) win!!'は目立つように赤色に変更した。（引き分けの時は緑色）

## それぞれの担当箇所

趙在瀛(zaiyingzhao): 2人対戦の大枠を実装（盤面拡大、プレイヤー2の操作内容定義、勝敗が決まったときの可視化（色含め））

田中瑞己(omikuzi-9): 爆弾の複数所持、連鎖爆発、壊れる壁、2つのゲームモードを実装。爆弾の個数及び爆発までの時間を入力から受け付けるように変更。

小林研二(kenjikoba): 爆発の炎の長さを入力から受け付ける仕組みを実装。

## 方式の説明？
### 爆弾の管理
構造体 bomb_point の二次元配列、及びint型の二次元配列 bomb_count を用いて爆弾の情報を管理しています。構造体の要素は爆弾の座標と、爆弾が置かれているかどうかを表す flag としています。爆弾を置く入力を受けると、配列中の空いている席（flag == 1のindex）を探して座標を格納します。

爆発までの時間の管理は bomb_count で行っていますが、こちらも構造体の中に内包した方がスッキリしたコードになったかもしれません...。

### ゲームモード
Free Turn Battleについては、課題7までと全く一緒です。Turn Battle ですが、現在のターン数の偶寄によって場合分けして、有効な入力を制限しています。有効でない入力を受け付けた場合、ターンを進めずに while文を continue することで入力の制限をしています。

### 炎の長さ等のカスタマイズ性
炎の長さや爆弾の数を変更できるようにするにあたって、各関数の引数を毎回追加していくのが面倒でした。なので、変更可能な情報はすべて一つの構造体 Cond に格納して、一つの引数で情報を渡せるようにしています。
